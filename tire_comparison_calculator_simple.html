<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <div class="tirecomparison-calculator">
        <div class="canvasHolder">
            <canvas class="canvas" id="canvasA"></canvas>
            <canvas class="canvas" id="canvasB"></canvas>
        </div>
        <div class="form_holder">
            <div class="form_one_container">
                <form class="form_one">
                    <div>
                        <label for="tireWidth">Outer Tire Width (mm)</label>
                        <input id="tireWidth" oninput="tireFunction()" value="205" type="number" min="0" max="399">
                    </div>
                    <div>
                        <label for="tireProfile">Tire Profile</label>
                        <input id="tireProfile" oninput="tireFunction()" value="55" type="number" min="0" max="99">
                    </div>
                    <div>
                        <label for="tireDiameter">Tire Diameter (inches)</label>
                        <input id="tireDiameter" oninput="tireFunction()" value="16" type="number" min="0" max="99">
                    </div>

                    <div>
                        <label for="offset">Rim Offset (mm)</label>
                        <input id="offset" oninput="tireFunction()" value="40" type="number" min="-99" max="99">
                    </div>

                </form>
            </div>
            <div class="form_two_container">
                <form class="form_two">
                    <div>
                        <label for="twoTireWidth">New Outer Tire Width (mm)</label>
                        <input id="twoTireWidth" oninput="twoTireFunction()" value="235" type="number" min="0" max="399">
                    </div>
                    <div>
                        <label for="twoTireProfile">New Tire Profile</label>
                        <input id="twoTireProfile" oninput="twoTireFunction()" value="40" type="number" min="0" max="99">
                    </div>
                    <div>
                        <label for="twoTireDiameter">New Tire Diameter (inches)</label>
                        <input id="twoTireDiameter" oninput="twoTireFunction()" value="17" type="number" min="0" max="99">
                    </div>
                    <div>
                        <label for="twoOffset">New Rim Offset (mm)</label>
                        <input id="twoOffset" class="mm" value="20" oninput="twoTireFunction()" type="number" min="-99" max="99">
                    </div>
                </form>
            </div>
        <br>
        <div class="form-check">
            <input class="form-check-input" onclick="checkTires()" type="checkbox" value="" id="checkTires" checked>
            <label class="form-check-label" for="checkTires">
                Show Tires
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" onclick="checkMeasurements()" type="checkbox" value="" id="checkMeasurements" checked>
            <label class="form-check-label" for="checkMeasurements">
                Show Measurements
            </label>
        </div>
        <div class="form-check advance_options">
            <input class="form-check-input" onclick="checkClearance()" type="checkbox" value="" id="checkClearance">
            <label class="form-check-label" for="checkClearance">
                Show Clearance
            </label>
        </div>
        <div class="form-check advance_options">
            <input class="form-check-input" onclick="checkFenderSuspension()" type="checkbox" value="" id="checkFenderSuspension">
            <label class="form-check-label" for="checkFenderSuspension">
                Show Fender and Suspension
            </label>
        </div>
            <p></p>
            <input type="button" id="buttonToggle" value="Show More Options" onclick="toggleMode()">
            <div class="form_three_container">
                <form class="form_three">
                    <div class="block_one">
                        <div class="advance_options form_one">
                            <label for="width">Inner Rim Width (mm)</label>
                            <input id="width" oninput="tireFunction()" value="6.5" type="number" min="0" max="99">
                        </div>
                        <div class="advance_options form_one">
                            <label for="wheelwellWidth">Wheelwell Clearance (mm) </label>
                            <input id="wheelwellWidth" oninput="tireFunction()" value="0" type="number" min="-100" max="100">
                        </div>
                        <div class="advance_options form_one">
                            <label for="fenderWidth">Fender Clearance (mm) </label>
                            <input id="fenderWidth" oninput="tireFunction()" value="0" type="number" min="-100" max="100">
                        </div>
                        <div class="advance_options form_one">
                            <label for="suspensionWidth">Suspension Width (mm)</label>
                            <input id="suspensionWidth" oninput="tireFunction()" value="0" type="number" min="-100" max="399">
                        </div>
                    </div>
                    <div class="advance_options form_two">
                        <label for="twoWidth">New Inner Rim Width (mm)</label>
                        <input id="twoWidth" class="ms" value="6.5" oninput="twoTireFunction()" type="number" min="-99" max="99">
                    </div>
                    <div class="advance_options form_two">
                        <label for="twoWheelwellWidth">New Wheelwell Clearance (mm) </label>
                        <input id="twoWheelwellWidth" oninput="twoTireFunction()" value="0" type="number" min="-100" max="100">
                    </div>
                    <div class="advance_options form_two">
                        <label for="twoFenderWidth">New Fender Clearance (mm)</label>
                        <input id="twoFenderWidth" oninput="twoTireFunction()" value="0" type="number" min="-99" max="99">
                    </div>
                    <div class="advance_options form_two">
                        <label for="twoSuspensionWidth">New Suspension Width (mm)</label>
                        <input id="twoSuspensionWidth" oninput="twoTireFunction()" value="0" type="number" min="0" max="99">
                    </div>
                </form>
            </div>
        <br>
    </div>
</div>
<style>
    .form_holder{
        background-color:#f8f8ff;
        float: left;
    }
    .form_two{
        color: blue;
    }
    .form_one_container{
        float:left;
    }
    .form_two_container{
        float:left;
    }
    .block_one{
        float:left;
    }
    .form_one{
        margin-right: 20px;
        color: red;
    }
    input, label {
        display:block;
    }
    input[type="button"] { 
        min-width: 32%;
    }
    input {
        width: 70px;
    }
    .form-check-input {
        width: 20px;
    }

    .canvasHolder{
        float:left;
        position: relative;
        height: 500px; width: 320px; /*based on your canvas size*/
    }
    .canvas{
        position: absolute;
        top: 0; left: 0;
        }
    .tirecomparison-calculator {
        background-color:#fcfcfc;
        margin-left: auto;
        margin-right: auto;
        overflow: hidden;
    }
</style>
<script>

let c = document.getElementById("canvasA");
    let d = document.getElementById("canvasB");
    let ctx = c.getContext("2d");
    let ctx2 = d.getContext("2d");
    let initialHeight = 500;
    let initialWidth = 320;
    c.width = initialWidth;
    c.height = initialHeight;
    d.width = initialWidth;
    d.height = initialHeight;
    let background = new Image();
    background.src = "https://sykjagni.sirv.com/jTkeSmK.gif";

    let tireImg = new Image();
    tireImg.src = "https://sykjagni.sirv.com/tire_PNG45.png";

    let inches = true;
    let enabled = true;
    let measure = true;
    let tires = true;
    let fendersuspension = false;
    let clearance = false;
    //if enabled disable the function to draw
    function checkClearance(){
        var remember = document.getElementById("checkClearance");
        if (remember.checked){
            clearance = true;
            tireFunction();
            twoTireFunction();
        }else{
            clearance = false;
            tireFunction();
            twoTireFunction();
        }
    }
    function checkFenderSuspension(){
        var remember = document.getElementById("checkFenderSuspension");
        if (remember.checked){
            fendersuspension = true;
            tireFunction();
            twoTireFunction();
        }else{
            fendersuspension = false;
            tireFunction();
            twoTireFunction();
        }
    }

    function checkMeasurements(){
        var remember = document.getElementById("checkMeasurements");
        if (remember.checked){
            measure = true;
            tireFunction();
            twoTireFunction();
        }else{
            measure = false;
            tireFunction();
            twoTireFunction();
        }
    }

    function checkTires(){
        var remembers = document.getElementById("checkTires");
        if (remembers.checked){
            tires = true;
            tireFunction();
            twoTireFunction();
        }else{
            tires = false;
            tireFunction();
            twoTireFunction();
        }
    }

    function toggleMode(){
        var divsToHide = document.getElementsByClassName("advance_options"); //divsToHide is an array
        if (enabled === true){
            enabled = false;
            //hide elements
            for(var i = 0; i < divsToHide.length; i++){
                //divsToHide[i].style.visibility = "hidden"; // or
                divsToHide[i].style.display = "none"; // depending on what you"re doing
            }
            document.getElementById("buttonToggle").value = "Show More Options";
        }
        else if (enabled === false) {
            enabled = true;

            for(var x = 0; x < divsToHide.length; x++){
                //divsToHide[i].style.visibility = "hidden"; // or
                divsToHide[x].style.display = "block"; // depending on what you"re doing
            }
            document.getElementById("buttonToggle").value = "Hide";

        }
        tireFunction();
        twoTireFunction();
    }

    function drawDimensions(canvasNum, tireWidth1, tireWidth2, fenderWidth, midpoint1, midpoint2, tireProfile, tireHeight, tiredWidth, strokeColor, offset){
        canvasNum.strokeStyle = strokeColor;

        //x line
        //big line
        canvasNum.beginPath();
        canvasNum.moveTo((tireWidth1) - fenderWidth - 50, midpoint1 - tireProfile); //top
        canvasNum.lineTo((tireWidth1) - fenderWidth - 50, midpoint2 + tireProfile); //bottom
        canvasNum.stroke();
        //x text
        canvasNum.font = "15px Helvetica";
        canvasNum.fillStyle = strokeColor;
        canvasNum.fillText(tireHeight.toFixed(1),  (tireWidth1) - fenderWidth - 80, ((midpoint1 - tireProfile) + (midpoint2 + tireProfile)) / 2 + offset);

        //top line
        canvasNum.beginPath();
        canvasNum.moveTo((tireWidth1) - fenderWidth - 50, midpoint1 - tireProfile);
        canvasNum.lineTo((tireWidth1) - fenderWidth - 20, midpoint1 - tireProfile);
        canvasNum.stroke();

        //bottom line
        canvasNum.beginPath();
        canvasNum.moveTo((tireWidth1) - fenderWidth - 20, midpoint2 + tireProfile);
        canvasNum.lineTo((tireWidth1) - fenderWidth - 50, midpoint2 + tireProfile);
        canvasNum.stroke();

        //y line
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth1, (midpoint1 - tireProfile) - 30);
        canvasNum.lineTo(tireWidth2, (midpoint1 - tireProfile) - 30);
        canvasNum.stroke();
        //y text
        canvasNum.textBaseline = "bottom";
        canvasNum.fillText((tiredWidth / 25.4).toFixed(2),  (tireWidth1 + tireWidth2) / 2 - 20 + offset , (midpoint1 - tireProfile) - 30);

        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth1, (midpoint1 - tireProfile) - 30);
        canvasNum.lineTo(tireWidth1, (midpoint1 - tireProfile) - 10);
        canvasNum.stroke();

        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth2, (midpoint1 - tireProfile) - 30);
        canvasNum.lineTo(tireWidth2, (midpoint1 - tireProfile) - 10);
        canvasNum.stroke();
        
    }

    function drawFenderSuspension(canvasNum, newWidth, tireWidth1, tireWidth2, midpoint1, midpoint2, tireProfile, fenderWidth, suspensionWidth, strokeColor){
        //draw fender line
        if (enabled === true && measure === true){
            if (tireWidth1 > newWidth){ 
            canvasNum.beginPath();
            canvasNum.setLineDash([2,3]);
            canvasNum.strokeStyle = strokeColor;
            canvasNum.moveTo((newWidth) - fenderWidth, midpoint1 - tireProfile);
            canvasNum.lineTo((newWidth) - fenderWidth, midpoint2 + tireProfile);
            canvasNum.stroke();
            canvasNum.setLineDash([]);
            }
            else {
            canvasNum.beginPath();
            canvasNum.strokeStyle = strokeColor;
            canvasNum.setLineDash([2,3]);

            canvasNum.moveTo((tireWidth1) - fenderWidth, midpoint1 - tireProfile);
            canvasNum.lineTo((tireWidth1) - fenderWidth, midpoint2 + tireProfile);
            canvasNum.stroke();
            canvasNum.setLineDash([]);
            }
            //draw suspension line
            canvasNum.beginPath();
            canvasNum.strokeStyle = strokeColor;
            canvasNum.setLineDash([2,3]);
            canvasNum.moveTo(tireWidth2 + (suspensionWidth), midpoint1 - tireProfile);
            canvasNum.lineTo(tireWidth2 + (suspensionWidth), midpoint2 + tireProfile);
            canvasNum.stroke();
            canvasNum.setLineDash([]);
        }
    }

    function drawClearance(canvasNum, wheelwellWidth, midpoint1, midpoint2, tireProfile, strokeColor){
        if (enabled === true && measure === true){

        //draw fender line
        canvasNum.beginPath();
        canvasNum.strokeStyle = strokeColor;
        canvasNum.moveTo(50,  (midpoint1 - tireProfile) - wheelwellWidth/2);
        canvasNum.lineTo(250, (midpoint1 - tireProfile) - wheelwellWidth/2);
        canvasNum.stroke();
        }
    }
    function drawProfile(canvasNum, tireWidth1, tireWidth2, widthValue, midpoint1, midpoint2, tireProfile, offsetValue){
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth1, midpoint1 - tireProfile);
        canvasNum.lineTo(offsetValue, midpoint1);
        canvasNum.stroke();
        
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth2, midpoint1 - tireProfile);
        canvasNum.lineTo(offsetValue + widthValue, midpoint1);
        canvasNum.stroke();
        
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth1, midpoint2 + tireProfile);
        canvasNum.lineTo(offsetValue, midpoint2);
        canvasNum.stroke();
        
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth2, midpoint2 + tireProfile);
        canvasNum.lineTo(offsetValue + widthValue, midpoint2);
        canvasNum.stroke();        
    }
    function drawWidth(canvasNum, tireWidth1, tireWidth2, midpoint1, midpoint2, tireProfile){
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth1, (midpoint1 - tireProfile)); //midpoint of rectangle
        canvasNum.lineTo(tireWidth2, (midpoint1 - tireProfile));
        canvasNum.stroke();
        
        canvasNum.beginPath();
        canvasNum.moveTo(tireWidth1, midpoint2 + tireProfile); //midpoint of rectangle
        canvasNum.lineTo(tireWidth2, midpoint2 + tireProfile);
        canvasNum.stroke();
    }

    function tireFunction() { //first set
        ctx.clearRect(0, 0, 320, 500);
        ctx.drawImage(background, 0, 0);
        let width           = document.getElementById("width").value * 12;
        let offset          = document.getElementById("offset").value / 2;
        let tireWidth       = parseInt(document.getElementById("tireWidth").value) / 4;
        let tireProfile     = parseInt(document.getElementById("tireProfile").value) * 1.1;
        let tireDiameter    = parseInt(document.getElementById("tireDiameter").value) * 12.5;
        let fenderWidth     = parseInt(document.getElementById("fenderWidth").value) || 0;
        let suspensionWidth = parseInt(document.getElementById("suspensionWidth").value) || 0;
        let wheelwellWidth  = parseInt(document.getElementById("wheelwellWidth").value) || 0;

        let tiredWidth      = parseInt(document.getElementById("tireWidth").value);
        let tiredProfile    = parseInt(document.getElementById("tireProfile").value);
        let tiredDiameter   = parseInt(document.getElementById("tireDiameter").value);
        let tireSidewall    = (tiredWidth * (tiredProfile / 100)) / 25.4;
        let tireHeight      = ((((tiredWidth * (tiredProfile / 100)) * 2) + (tiredDiameter * 25.4)) / 25.4);



        let widthValue = 15 + parseInt(width);
        let offsetValue = 140 + parseInt(offset) - parseInt(width) / 2;
        let midpoint1 = (440 - tireDiameter) / 2;
        let midpoint2 = (440 + tireDiameter) / 2;

        tireProfile = ((tireHeight * 12.25) - (midpoint2 - midpoint1)) / 2;

        let tireWidth2 = offsetValue + tireWidth + (widthValue / 2);
        let tireWidth1 = offsetValue - tireWidth + (widthValue / 2);

        if (measure === true){
            drawDimensions(ctx, tireWidth1, tireWidth2, fenderWidth, midpoint1, midpoint2, tireProfile, tireHeight, tiredWidth, "#FF0000", 0);

            //draw rect
            ctx.beginPath();
            ctx.strokeStyle    = "#FF0000";
            ctx.lineWidth      = 1.5;
            if (tires === true){
                ctx.rect(147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
                ctx.drawImage(tireImg,  147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            }
            if (enabled === false){
            ctx.rect(147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            }
            else{
            ctx.rect(offsetValue, (440 - tireDiameter) / 2, widthValue, tireDiameter); //x,y,width,height
            }
            ctx.stroke();
            ctx.strokeStyle = "#000000";
            if (enabled === true){

            //draw lines on top and below the rectangle
            drawWidth(ctx, tireWidth1, tireWidth2, midpoint1, midpoint2, tireProfile);

            //draw two lines connecting the tire widths to the base of the rectangle
            drawProfile(ctx, tireWidth1, tireWidth2, widthValue, midpoint1, midpoint2, tireProfile, offsetValue);
            ctx.strokeStyle = "#FF0000";

            //draw fender and suspension lines
            if (fendersuspension === true){
                drawFenderSuspension(ctx, offsetValue, tireWidth1, tireWidth2, midpoint1, midpoint2, tireProfile, fenderWidth, suspensionWidth, "#FF0000");
            }

            if (clearance === true){
            drawClearance(ctx, wheelwellWidth ,midpoint1, midpoint2, tireProfile, "#FF0000");
            }
            }
        }

        else if (measure === false){
            ctx.beginPath();
            ctx.strokeStyle    = "#FF0000";
            ctx.lineWidth      = 1.5;
            ctx.drawImage(tireImg,  147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            ctx.stroke();
        }
    }

    function twoTireFunction() {
        ctx2.clearRect(0, 0, 320, 500);

        let width           = (document.getElementById("twoWidth").value) * 12;
        let offset          = (document.getElementById("twoOffset").value) / 2;
        let tireWidth       = (parseInt(document.getElementById("twoTireWidth").value)) / 4;
        let tireProfile     = (parseInt(document.getElementById("twoTireProfile").value)) * 1.1;
        let tireDiameter    = (parseInt(document.getElementById("twoTireDiameter").value)) * 12.5;

        let tiredWidth      = parseInt(document.getElementById("twoTireWidth").value);
        let tiredProfile    = parseInt(document.getElementById("twoTireProfile").value);
        let tiredDiameter   = parseInt(document.getElementById("twoTireDiameter").value);
        let fenderWidth     = (parseInt(document.getElementById("twoFenderWidth").value)) || 0;
        let suspensionWidth = parseInt(document.getElementById("twoSuspensionWidth").value) || 0;
        let wheelwellWidth  = parseInt(document.getElementById("twoWheelwellWidth").value) || 0;

        let tireSidewall    = (tiredWidth * (tiredProfile / 100)) / 25.4;
        let tireHeight      = (((tiredWidth * (tiredProfile / 100))  * 2) + (tiredDiameter * 25.4)) / 25.4;

        let widthValue  = 15 + parseInt(width);
        let offsetValue = 140 + parseInt(offset) - parseInt(width) / 2;
        let midpoint1   = (440 - tireDiameter) / 2;
        let midpoint2   = (440 + tireDiameter) / 2;

        tireProfile     = ((tireHeight * 12.25) - (midpoint2 - midpoint1)) / 2;

        let tireWidth2  = offsetValue + tireWidth + (widthValue / 2);
        let tireWidth1  = offsetValue - tireWidth + (widthValue / 2);

        if (measure === true){
            drawDimensions(ctx2, tireWidth1, tireWidth2, fenderWidth, midpoint1, midpoint2, tireProfile, tireHeight, tiredWidth, "#0000FF", 50);

            //draw rect
            ctx2.beginPath();
            ctx2.strokeStyle    = "#0000FF";
            ctx2.lineWidth      = 1.5;
            if (enabled === false){
            ctx2.rect(147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            }
            else {
            ctx2.rect(offsetValue, (440 - tireDiameter) / 2, widthValue, tireDiameter); //x,y,width,height
            }
            if (tires === true){
            ctx2.rect(147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            ctx2.globalAlpha    = 0.35;
            ctx2.drawImage(tireImg,  147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            ctx2.globalAlpha    = 1;
            }
            ctx2.stroke();
            ctx2.strokeStyle = "#000000";
            if (enabled === true){

                //draw lines on top and below the rectangle
                drawWidth(ctx2, tireWidth1, tireWidth2, midpoint1, midpoint2, tireProfile);

                //draw two lines connecting the tire widths to the base of the rectangle
                drawProfile(ctx2, tireWidth1, tireWidth2, widthValue, midpoint1, midpoint2, tireProfile, offsetValue);
                ctx2.strokeStyle = "#0000FF";

                //draw fender and suspension lines
                if (fendersuspension === true){
                drawFenderSuspension(ctx2, offsetValue, tireWidth1, tireWidth2, midpoint1, midpoint2, tireProfile, fenderWidth, suspensionWidth, "#0000FF");
                }

                if (clearance === true){
                    drawClearance(ctx2, wheelwellWidth ,midpoint1, midpoint2, tireProfile, "#0000FF");
                }
            }
        }

        else if (measure === false){
            ctx2.beginPath();
            ctx2.strokeStyle    = "#0000FF";
            ctx2.lineWidth      = 1.5;
            ctx2.globalAlpha    = 0.35;

            ctx2.drawImage(tireImg,  147.5 + parseInt(offset) - ((tireWidth2 - tireWidth1) /2) , ((440 - tireDiameter) / 2) - tireProfile, tireWidth2 - tireWidth1, tireDiameter + (tireProfile * 2)); //x,y,width,height
            ctx2.globalAlpha    = 1;

            ctx2.stroke();
        }


    }
    // Make sure the image is loaded first otherwise nothing will draw.

    background.onload = function () {
        toggleMode();
        ctx.drawImage(tireImg,0 ,0 ,0, 0);
        ctx2.drawImage(tireImg, 0, 0, 0, 0);
        
        var allowedDomains = ['127.0.0.1', 'example2.com'];
        console.log(document.domain);
        if (allowedDomains.indexOf(document.domain) == -1) {
        // Code to redirect here
        console.log('wrong domain');
        }
        else{
            console.log('correct');
        }
    };
</script>
</body>
</html>